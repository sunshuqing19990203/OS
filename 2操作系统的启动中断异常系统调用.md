2021.1.3 孙书情 

[bilibili 清华大学陈渝向勇老师操作系统课程](https://www.bilibili.com/video/BV1js411b7vg)

[MOOC 华中科技大苏曙光操作系统原理](https://www.icourse163.org/learn/HUST-1003405007?tid=1450237469#/learn/content?type=detail&id=1214423439&cid=1218120393&replay=true)

[MOOC 哈工大李治军操作系统](https://www.icourse163.org/learn/HIT-1002531008?tid=1003635010#/learn/content?type=detail&id=1005200299&cid=1006621588)

# 2 操作系统的启动

## 2.1 OS如何加载到CPU的内存上面

BIOS，BootLoader，OS

![image-20210103182109603](2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%90%AF%E5%8A%A8%E4%B8%AD%E6%96%AD%E5%BC%82%E5%B8%B8%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8.assets/image-20210103182109603.png)



## 2.2 OS与设备、程序的交互

 **OS面向设备或外设是通过中断和IO进行交互的，面向内部程序是通过系统调用和异常提供相应的功能或服务的。**



定义：

1. 系统调用system call（来源于内部的应用程序）：程序主动的向操作系统发出服务的请求。

2. 异常exception（来源于**不良的内部程序**）：非法指令或者其他坏的处理状态，譬如内存出错。

3. 中断interrupt（来源于外设）：来自于不同的硬件设备的计时器和网络的中断。

   

处理时间：

​	中断：异步

​	异常：同步

​	系统调用：异步或同步



响应：

1. 中断：持续，对用户程序透明，由OS后台完成
2. 异常：杀死或者重新执行意想不到的应用程序指令
3. 系统调用：等待和持续



## 2.3 中断和异常的处理机制

**中断发生时：**

硬件需要完成的事情：1.设置中断标记。2.查找中断号。

软件（OS）需要完成的事情：1.保存当前状态。2.中断服务程序处理。3.清楚中断标记。4.恢复现场

**异常发生时：**

得到异常编号，1.保存现场。2.异常处理（（1）杀死产生异常的指令。或者是（2）重新执行造成异常的指令）3.恢复现场

**system call**

接口：system call interface



**用户态和内核态**